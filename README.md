# Телеграм-бот для получения информации о курсах Сетевого IT-Университета

## Мотивация создания
Существующая система предоставляет только веб-интерфейс, который долго загружается на мобильных устройствах. 
Чтобы узнать о новых курсах, необходимо посетить все страницы с программами, что также занимает время.

## Попробовать приложение
Приложение предоставляется в двух форматах: консольная программа и [телеграм бот](https://t.me/ITPermCoursesBot).

## Развертывание телеграм-бота
Для развертывания используется Docker, конфигурация контейнера описана в Dockerfile. 
Также потребуется Redis и токен для телеграм-бота.

Пример .env-файла:
```bash
REDIS_URL=rediss://<USER>:<PASSWORD>@<HOST>:<PORT>
TOKEN=<TOKEN>
WEB_SERVICE_URL=https://my-site.com
```
`WEB_SERVICE_URL` используется для получения сообщений для бота через веб-хук

Для регистрации веб-хука необходимо использовать следующую ссылку: 
```bash
https://api.telegram.org/bot<TOKEN>/setWebhook?url=<WEB_SERVICE_URL>/bot/<TOKEN>
```
Для обновления состояния базы данных Redis можно использовать периодический запуск скрипта `caching/job.py`

Исходный бот и база данных были успешно развернуты на платформе [render.com](https://render.com/)

## Установка и запуск консольного приложения
### Установка
Рекомендуемая версия Python: 3.11
```bash
git clone https://github.com/Daniil-Solo/Parsing-courses-IT-Perm.git
cd Parsing-courses-IT-Perm
python -m venv venv
venv\Scripts\activate
pip install -r console_app/console-requirements.txt
```

### Запуск
```bash
python console-app.py
```
`--only_actual` - учитывать актуальность при выводе (по умолчанию y)

`--view` - объем информации о курсах (по умолчанию small)
* __small__ - вывод только названия курсов по программе
* __full__ - вывод полной информации о курсах по программе


## Производительность
Проект был написан с использованием асинхронной библиотеки aiohttp и парсера lxml. Скорость работы выросла в 3 раза по 
сравнению с первоначальным вариантом на requests и html.parser.

| Метрика | requests | aiohttp | aiohttp+lxml |
| :-------------- |:------------:| :-----:|:-----:|
| Время работы | 4.3 сек.  | 1.5 сек. | 1.4 сек. |

## Технологии для консольного приложения
`Python 3.11`
`bs4`
`aoihttp`
`lxml`
## Технологии для телеграмм-бота
`Python 3.11`
`Docker`
`bs4`
`aoihttp`
`lxml`
`redis`
`aiogram`
`fastapi`
`gunicorn`
`uvicorn`